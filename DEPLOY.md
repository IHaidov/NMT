# Деплой: збереження бази даних

Щоб **база даних (SQLite) не перезатиралась при кожному деплої**, її потрібно зберігати на **persistent storage**, а не в робочій папці застосунку.

## Як це працює

- Сервер використовує змінну середовища **`DATABASE_PATH`**.
- Якщо вона задана — файл БД створюється/читається за цим шляхом (наприклад на диску, що зберігається між деплоями).
- Якщо не задана — використовується `nmt.db` у папці проєкту (зручно для локальної розробки).

## Render.com

1. У вашому **Web Service** відкрийте **Settings** → **Disks**.
2. Додайте **Persistent Disk**:
   - **Name**: наприклад `nmt-data`
   - **Mount Path**: `/data`
   - **Size**: достатньо 1 GB.
3. У **Environment** додайте змінну:
   - **Key**: `DATABASE_PATH`
   - **Value**: `/data/nmt.db`
4. Збережіть і зробіть **Manual Deploy** (або наступний деплой після push).

Після цього файл `/data/nmt.db` буде зберігатись між деплоями, і вчителі, класи, учні та спроби тестування не зникнуть.

## Інші платформи

- **Railway / Fly.io / тощо**: створити volume (persistent disk) і вказати шлях до нього в `DATABASE_PATH`, наприклад `/data/nmt.db`.
- **VPS (свій сервер)**: можна не задавати `DATABASE_PATH` і зберігати `nmt.db` у папці проєкту, або вказати шлях у зручному місці, наприклад `/var/lib/nmt/nmt.db`.

## Локально

Просто запускайте `npm start`. Файл `nmt.db` створиться у папці проєкту (і доданий у `.gitignore`, щоб не потрапив у репозиторій).
